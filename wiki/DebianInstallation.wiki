Install !OpenAddresses on Debian

<wiki:toc max_depth="2" />

= Environment = 

Main URL: http://c2cpc84.camptocamp.com
SSH: ssh admin@c2cpc84.camptocamp.com

= !HowTo Deploy !OpenAddresses Server =

This has to be done everytime a new application wants to be deployed on the server

 * cd trunk/openaddresses
 * python deploy.py config/c2cpc84.cfg
 * http://c2cpc84.camptocamp.com/openaddresses/

= !HowTo Install !OpenAddresses Server =

 * See http://code.google.com/p/openaddresses/wiki/SuseInstallation#HowTo_Install_OpenAddresses_Server

== Create a database ==

{{{
sudo su postgres
psql
CREATE DATABASE openaddresses;
\q
createlang plpgsql openaddresses
psql -d openaddresses -f /usr/share/postgresql-8.3-postgis/lwpostgis.sql
psql -d openaddresses -f /usr/share/postgresql-8.3-postgis/spatial_ref_sys.sql
}}}

{{{
 pg_restore -d openaddresses oa.backup
 psql -d openaddresses -f myfile.sql
}}}

== Migrate database 8.3 -> 8.4 ==

{{{
sudo su - postgres
cd /tmp
wget http://svn.osgeo.org/postgis/trunk/utils/postgis_restore.pl
chmod +x postgis_restore.pl

# dump:
export PGPORT=5432
pg_dump -Fc openaddresses > /tmp/openaddresses.dump

# restore:
export PGPORT=5433
./postgis_restore.pl
/usr/share/postgresql/8.4/contrib/postgis-1.5/postgis.sql
openaddresses /tmp/openaddresses.dump
}}}